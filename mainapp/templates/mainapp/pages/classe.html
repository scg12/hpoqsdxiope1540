  {% extends 'mainapp/layouts/base-dashbord.html' %}

  {% load i18n static %}

  {% block header %}
      
      <script src="{% static 'js/classes.js' %}"></script>

      <style type="text/css">
        
        table span:hover, tr:hover{
          cursor: pointer;
        }

    /* no select sur les elemenst th */
        th, td {
        -webkit-touch-callout: none; /* iOS Safari */
          -webkit-user-select: none; /* Safari */
           -khtml-user-select: none; /* Konqueror HTML */
             -moz-user-select: none; /* Old versions of Firefox */
              -ms-user-select: none; /* Internet Explorer/Edge */
                  user-select: none; /* Non-prefixed version, currently supported by Chrome, Opera and Firefox */
      }

/* 
tr:nth-child(even) {background: #CCC}
tr:nth-child(odd) {background: #FFF} */


      .box{
        width: 25%;
        float: left;
        background-color: #4CAF50;
      }
      .box-mini{
        width: 100px;
        
        position: relative;
        left: 0px;
        /*float: left;*/
        /*background-color: #4CAF50; */
      }
      .box .chart{
        position: relative;
        width: 150px;
        height: 150px;
        margin: 25px;
        text-align: center;
        font-size: 30px;
        color: #fff;
        line-height: 150px;
      }
      .box-mini .chart-mini{
        position: relative;
        width: 40px;
        height: 40px;
        margin: 5px;
        text-align: center;
        font-size: 14px;
        font-weight: bold;
        color: #000;
        line-height: 40px;
      }
      .box-mini .chart-mini canvas{
        position: absolute;
        top: 0;
        left: 0;
      }

      .box .chart canvas{
        position: absolute;
        top: 0;
        left: 0;
      }
      .box .chart h2{
        text-align: center;
        text-transform: uppercase;
      }
      </style>
      
  {% endblock %}


      {% block language %}
          <form action="/i18n/setlang/" method="post">
                  {% csrf_token %}
                  <input name="next" type="hidden" value="{% url 'mainapp:liste_classes' %}" />
                  
                  <select name="language" onchange="this.form.submit()">
                    {% for lang in LANGUAGES %}
                      {% if LANGUAGE_CODE == lang.0 %}
                        <option value="{{ lang.0 }}" selected>{{ lang.1 }}</option>
                      {% elif LANGUAGE_CODE != lang.0 %}
                        <option value="{{ lang.0 }}">{{ lang.1 }}</option>
                      }
                      {% endif %}
                    {% endfor %}
                  </select>
          </form>
      {% endblock %}

{% block sidebar %}
    {% include 'mainapp/layouts/_nav_sidebar_classe.html' %}
{% endblock %}

  {% block content %}
    
      <div class="container-fluid">
        <div class="row">

          <div class="col-md-12">

            <div class="card">
              
              <div class="card-body">
                <div class="row">
                  
                  <div class="col-md-3 col-sm-6 mr-2">
                    <div class="card card-stats my-card ">
                      <div class="card-header vert">
                        <i class="fas fa-home fa-4x" style="margin-right: 4px"></i>
                        <span class="text-right h5" style="text-transform: uppercase; font-weight: bold;">{{ classe.nom_classe }}</span>
                      </div>
                      
                      <div class="card-body" >
                        <div class="row"> 
                          <div class="col-md-12 text-left px-0 mx-0">
                            <div>
                                <div class="h5">EFFECTIF : {{ nbre_eleves }}</div>
                                <span class="h5 mr-5"><i class="fas fa-male fa-2x"></i> : {{ nbre_garcons }}</span>
                                <span class="h5"><i class="fas fa-female fa-2x"></i> : {{ nbre_filles }}</span> 
                            </div>
                            
                          </div>
                          
                                      
                        </div>
                      </div>
                    </div>  
                  </div>

                  <div class="col-md-2">
                   
                    
                    
                  </div>
                  
                  <div class="col-md-4">
                    <div class="card card-stats my-card">
                      <div class="card-header vert">
                        <i class="fas fa-hospital fa-4x"></i>
                        <span class="h5 ml-4" style="text-transform: uppercase;font-weight: bold">ETAT DE SANTE</span>
                      </div>
                        <div class="card-body" >
                            <div class="row">
                              <div class="col-md-4">
                                <div class="box-mini" style="display: inline;">
                                  <div class="chart-mini" data-percent="{{ nbre_eleves_en_sante }}">{{ nbre_eleves_en_sante }}%</div><div>BON</div>
                                  
                                </div>
                              </div>

                              <div class="col-md-4">
                                <div class="box-mini" style="display: inline">
                                  <div class="chart-mini" data-percent="{{ nbre_eleves_sante_fragile }}">{{ nbre_eleves_sante_fragile }}%</div><div>MOYEN</div>
                                  
                                </div>
                              </div>

                              <div class="col-md-4">
                                <div class="box-mini" style="display: inline">
                                  <div class="chart-mini" data-percent="{{ nbre_eleves_malade }}">{{ nbre_eleves_malade }}%</div><div>MAUVAIS</div>
                                  
                                </div>  
                              </div>

                            </div>
                    
                        </div>
                
                    </div>
                    
                    
                  </div>
                
                </div>
                  <div class="row">

                    <div class="col-sm-12 col-md-12">
                      <p class="h3 text-center">CLASSE : {{ classe.nom_classe }}</p>
                      <p class="h4 ">COURS : 

                        <select>
                          {% for c in cours %}
                          
                            {% if c.nom_matiere == first_cours.nom_matiere %}
                                <option selected="">{{ c.nom_matiere }}</option>
                            {% else %}
                            <option>{{ c.nom_matiere }}</option>
                            {% endif %}
                          {% endfor %}
                        </select></p>
                        <p>COEFF : {{ first_cours.coef }}</p>
                    </div>
                      
                      <!--                   <div class="box">
                            <div class="chart" data-percent="73">73%</div>
                            <h2>Html</h2>
                      </div>
                      <div class="box mx-3">
                            <div class="chart" data-percent="83">83%</div>
                            <h2>Css</h2>
                      </div>
                      <div class="box">
                            <div class="chart" data-percent="97">97%</div>
                            <h2>Javascript</h2>
                      </div>
                      <div class="box">
                            <div class="chart" data-percent="49">49%</div>
                            <h2>Photoshop</h2>
                      </div> -->

                  </div>

                    <div class="row">

                        <div class="col-sm-12 col-md-8">
                            
                             <label>Afficher </label> 
                             <select id="nbre_element_par_page" class="form-control-sm">
                                
                                <option value="50">50</option>
                                <option value="100">100</option>
                                <option value="150">150</option>
                                <option value="200">200</option>
                                <option value="-1">Tout</option>
                              </select> 
                              <label>Elements</label> 
                            
                        </div>

                        <div class="col-sm-12 col-md-4">
                          <form action="{% url 'mainapp:recherche_classe' %}" class="recherche_classe" method="GET">
                            {% csrf_token %}
                              <input type="search" placeholder="Entrer votre recherche ici" class="form-control form-control-sm recherche" name="recherche" id="recherche">
                              <div id="message" ></div>
                          </form>
                          
                        </div>

                    </div>
                   <!--  <div class="fixed-btn-add">
                       {% if perms.mainapp.can_add_cours or perms.mainapp.add_classe %}
                         <button type="button" rel="tooltip" class="cursus-btn-round ajouter-classe-link" data-toggle="modal" data-target="#modal_ajouter_classe">
                             <i class="material-icons text_align-center">add</i>
                         </button>
                       {% endif %}
                   </div> -->

              <div class="table-responsive">
                    <div class="table-scroll">
                      <table class="table">
                        <thead class="">
                          <tr>
                            <th scope="col" class="fix-col0 " >#
                                  
                            </th>
                            <th scope="col" class="fix-col1" >Photo
                                  
                            </th>
                            
                            <th scope="col" class="nom_classe fix-col2 active" >
                                <span class="tri tri-asc">&nbsp;&nbsp;&nbsp;Nom
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px" style="display: block"> -->
                                </span>                                                       
                            </th>
                            <th scope="col" class="nom_niveau" >
                                <span class="tri tri-asc">Prenom
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px"> -->
                                </span>                                                       
                            </th>
                            <th scope="col" class="nom_cycle" >
                                <span class="tri tri-asc">Matricule
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px"> -->
                                </span>                                                       
                            </th>
                            <th scope="col" class="nom_cycle" >
                                <span class="tri tri-asc">Sexe
                                  <!--<img src="{% static 'images/arrow.png' %}" width="20px" height="20px">-->
                                </span>                                                       
                            </th>
                            <th scope="col" class="nom_sousetab">
                                <span class="tri tri-asc">Date Naissance
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px" > -->
                                </span>                                  
                            </th>
                            <th scope="col" class="nom_etab">
                                <span class="tri tri-asc">Lieu Naissance
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px"> -->
                                </span> 
                               
                            </th>
                            <th scope="col" class="nom_etab">
                                <span class="tri tri-asc">Entrée
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px"> -->
                                </span> 
                               
                            </th>
                            <th scope="col" class="nom_etab">
                                <span class="tri tri-asc">Redouble?
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px"> -->
                                </span> 
                               
                            </th>
                            <th scope="col" class="nom_etab">
                                <span class="tri tri-asc">Santé
                                  <!-- <img src="{% static 'images/arrow.png' %}" width="20px" height="20px"> -->
                                </span> 
                               
                            </th>
                            <th scope="col" class="text-right">Opérations
                            </th>

                          </tr>
                        </thead>
                        <tbody>
                           
                                {% for eleve in page_active  %}
                                <tr class="{{ eleve.id }}²²{{ eleve.nom }}²²{{ eleve.nom_prenom }}²²{{ eleve.matricule }}²²{{ eleve.sexe }}²²{{ eleve.date_naissance }}">
                                  
                                  <th scope="row" class="detail-eleve-link-td fix-col0">{{ forloop.counter }}</th>
                                
                                  <td class="detail-eleve-link-td fix-col1"><img class="photo" src="/../../media/photos/22_signe.jpeg" width="30px" height="30px"></td>
                                  <td class="detail-eleve-link-td fix-col2" style="text-transform: uppercase;">
                                    {{ eleve.nom }}&nbsp;{{ eleve.nom }}</td>
                                    
                                      
                                  <td class="detail-eleve-link-td" style="text-transform: uppercase;">{{ eleve.prenom }}</td>
                                  <td class="detail-eleve-link-td" style="text-transform: uppercase;">{{ eleve.matricule }}</td>
                                  
                                  <td class="detail-eleve-link-td" style="text-transform: uppercase;">{{ eleve.sexe }}</td>
                                  
                                  <td class="detail-eleve-link-td" style="text-transform: uppercase;">{{ eleve.date_naissance }}</td>
                                  <td class="detail-eleve-link-td" style="text-transform: capitalize;">{{ eleve.lieu_naissance }}</td>
                                  <td class="detail-eleve-link-td" style="text-transform: capitalize;">{{ eleve.date_entree }}</td>
                                  <td class="detail-eleve-link-td" style="text-transform: capitalize;">{{ eleve.redouble }}</td>
                                  <td class="detail-eleve-link-td" style="text-transform: capitalize;">
                                
                                    {% if eleve.etat_sante == "0" %}                                                      
                                        <div class="etat-sante-signe vert1" style=""></div>
                                    {% elif eleve.etat_sante == "1" %}                                 
                                        <div class="etat-sante-signe jaune" style=""></div>
                                    {% else %}
                                       <div class="etat-sante-signe rouge1" style=""></div>                            
                                    {% endif %}
                                
                                  </td>
                                    
                                  <td class="td-actions text-right"> 
                                  
                                      <!-- {% if perms.mainapp.can_change_classe or perms.mainapp.change_classe %}
                                        <button rel="tooltip" class="btn btn-link modifier-classe-link">
                                          <i class="material-icons">edit</i>
                                        </button>
                                      {% endif %}
                                        
                                      {% if perms.mainapp.can_delete_classe or perms.mainapp.delete_classe %}
                                        <button class="btn btn-link supprimer-classe-link">
                                          <i class="material-icons">insert_chart</i>
                                        </button>
                                      {% endif %} -->
                                        
                                        
                                       
                                          <!-- <i class="material-icons">more_horiz</i>
                                          <i class="material-icons">warning</i> -->
                                        
                                          <span><i class="material-icons">insert_chart</i></span>
                                          <i class="material-icons">contact_mail</i>
                                       
                                        <!-- <button class="btn btn-link supprimer-classe-link"  style="color: #506ce9;">
                                          <i class="material-icons">warning</i>
                                        </button> -->

                                        
                                        
                                                                            
                                                                                       
                                  </td> 
                                
                                </tr>

                                {% empty %}
                                  <tr>
                                    <td colspan="10" class="text-center h4">Aucun classe(s) créé(s) </td>
                                  </tr>
                            {% endfor %}

                        </tbody>
                        <tfoot>
                          <tr>
                            <th scope="col" class="fix-col0">#</th>
                            <th scope="col" class="fix-col1">photo</th>
                            <th scope="col" class="fix-col2">Nom</th>
                            <th scope="col" >Prenom</th>
                            <th scope="col" >Matricule</th>
                          
                            <!-- <th scope="col">Sexe</th>-->
                            
                            <th scope="col">Date Naissance</th>                             
                            <th scope="col">Lieu Naissance</th>                             
                            <th scope="col">Date Entrée</th>                             
                            <th scope="col">Redouble</th>                             
                            <th scope="col">Santé</th>                             
                            <th scope="col">Actions</th>                              
                          
                          </tr>
                        </tfoot>
                  
                    </table>
                    </div>

              </div>      
      
                       {% block pagination %}
                          {% include 'mainapp/layouts/_pagination.html' %}
                      {% endblock %}
                          
                  
                  
              </div>

            </div>



          </div>
        </div>
      </div>


        <!-- Detail-Dialog box -->
      <div class="modal fade" id="modal_detail_classe" tabindex="-1" role="">
          <div class="modal-dialog" role="document">
              <div class="modal-content card card-nav-tabs">
                  <div class=" card-nav-tabs card-header-primary card-header-icon">
                    <div class="card-icon"><i class="material-icons">library_books</i></div>          
                  </div>

                  <div class="modal-body ">
                      <div class="card-body card-primary">
                        <p class="h4 text-center">DETAIL CLASSE</p>
                        <form method="post"  class="detail_classe" action=" ">
                            {% csrf_token %}
                            {{ form.as_p }}

                              <div class="text-center">
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Quitter</button>
                             </div>

                        </form>

                      </div>
                      
                  </div>
                     
              </div>
          </div>
      </div>


        <!-- dialog box ajouter classe  -->

      <div class="modal fade" id="modal_ajouter_classe" tabindex="-1" role="">
          <div class="modal-dialog" role="document">
              <div class="modal-content card card-nav-tabs">
                  <div class=" card-nav-tabs card-header-primary card-header-icon">
                    <div class="card-icon"><i class="material-icons">library_books</i></div>          
                  </div>
                      <div class="modal-body ">
                        <div class="card-body">
                          <p class="h4 text-center">AJOUTER CLASSE</p>
                          <form method="post"  class="" action="{% url 'mainapp:creation_classe' %}">
                              {% csrf_token %}
                              {{ form.as_p }}

                               <label id="message"></label>
                              <div class="text-center">
                                  <button type="submit" class="btn">Créer</button>
                                  <button type="button" class="btn btn-danger" data-dismiss="modal">Annuler</button>
                               </div>
                          </form>

                        </div>
                        
                    </div>
         
              </div>
          </div>
      </div>

        <!-- dialog box modifier classe  -->

      <div class="modal fade" id="modal_modifier_classe" tabindex="-1" role="">
          <div class="modal-dialog" role="document">
              <div class="modal-content card card-nav-tabs">
                  <div class=" card-nav-tabs card-header-primary card-header-icon">
                    <div class="card-icon"><i class="material-icons">library_books</i></div>          
                  </div>

                  <div class="modal-body ">
                    <div class="card-body">
                      <p class="h4 text-center">MODIFIER CLASSE</p>
                         <form method="post" class="modifier_classe" action="{% url 'mainapp:modification_classe' %}">
                          {% csrf_token %}
                          {{ form.as_p }}

                            <input type="hidden" name="id_modif" id="id_modif">
                            <div class="text-center">
                              <button type="submit" class="btn">Modifier</button>
                              <button type="button" class="btn btn-danger" data-dismiss="modal">Annuler</button>
                              
                            </div>
                          </form>
                    </div>
                    
                  </div>
                          
              </div>
          </div>
      </div>



        <!-- Suppression-Dialog box -->

      <div class="modal fade" id="modal_supprimer_classe" tabindex="-1" role="">
          <div class="modal-dialog" role="document">
              <div class="modal-content card card-nav-tabs">
                  <div class=" card-nav-tabs card-header-primary card-header-icon">
                    <div class="card-icon"><i class="material-icons">library_books</i></div>          
                  </div>
                  <div class="modal-body ">
                      <div class="card-body card-primary">

                        <form method="post"  class="suppression_classe" action="{% url 'mainapp:suppression_classe' %} ">
                          <p class="h4 text-center">SUPPRIMER CLASSE</p>
                            {% csrf_token %}
                              <input type="hidden" name="id_supp" id="id_supp">

                              <div class="form-group">
                                <label class="">Classe : </label>
                                <label class="nom_classe"></label>
                              </div>
                              <div class="form-group">
                                <label class="">Niveau : </label>
                                <label class="nom_niveau"></label>
                              </div>
                              <div class="form-group">
                                <label class="">Cycle : </label>
                                <label class="nom_cycle"></label>
                              </div>

                              <div class="form-group">
                                <label class="">Sous Etab : </label>
                                <label class="nom_sousetab"></label>
                              </div>

                              <div class="form-group">
                                <label class="">etablissement : </label>
                                <label class="nom_etab"></label>
                              </div>
                              
                              <div class="card-body">Voulez vous vraiment supprimer?</div>
                              <div class="text-center">
                                <button type="submit" class="btn">OUI</button>
                                <button type="button" class="btn btn-danger" data-dismiss="modal">NON</button>
                              </div>

                        </form>

                      </div>
                      
                  </div>
                     
              </div>
          </div>
      </div>



        <!-- markup -->
        <button class="btn btn-fill" onclick='swal({ title:"Good job!", text: "You clicked the button!", type: "success", buttonsStyling: false, confirmButtonClass: "btn btn-success"})'>Try me!</button>
            <!-- for more actions that you can use onclick, please check out assets/demo/js/demo.js -->

      <button class="btn btn-fill" onclick="demo.showSwal('auto-close')">Try me!<div class="ripple-container"></div></button>


  

  {% endblock %}

{% block menu_fixed %}    
    {% include 'mainapp/layouts/_nav_toolbar_classe.html' %}
{% endblock %}


  {% block script_page %}

  <script src="{% static 'assets/js/core/jquery.easypiechart.js' %}"></script>
  <script>
    $(function(){
      $(".chart").easyPieChart({
          size: 150,
          barColor:'#17d3e6',
          scaleColor: false,
          lineWidth: 15,
          trackColor: '#373737',
          lineCap: 'circle',
          animate: 3500,
      });
    });

    $(function(){
      $(".chart-mini").easyPieChart({
          size: 60,
          barColor:'#4CAF50',
          scaleColor: false,
          lineWidth: 8,
          trackColor: '#373737',
          lineCap: 'circle',
          animate: 3500,
      });
    });

  </script>
  {% endblock %}